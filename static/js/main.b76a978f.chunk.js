(this.webpackJsonpreminder=this.webpackJsonpreminder||[]).push([[0],{18:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(3),s=n.n(r),i=(n(18),n(4)),o=n(12),u=n(2),l="SET_LOADING",d="SET_STORIES",b="REMOVE_STORY",j="HANDLE_PAGE",p="HANDLE_SEARCH",h=function(e){var t=e.hits,n=e.nbPages;return{type:d,payload:{hits:t,nbPages:n}}},g=function(e,t){return{type:p,payload:{query:e,page:t}}},O={isLoading:!0,hits:[],query:"",page:0,nbPages:0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(console.log("Reducer ->>>",e),t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case d:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,hits:t.payload.hits,nbPages:t.payload.nbPages});case b:return Object(u.a)(Object(u.a)({},e),{},{hits:e.hits.filter((function(e){return e.id!==t.payload.id}))});case p:return console.log("reducer",e,t),Object(u.a)(Object(u.a)({},e),{},{query:t.payload.query,page:t.payload.page});case j:if("inc"===t.payload){var n=e.page+1;return n>e.nbPages&&(n=0),Object(u.a)(Object(u.a)({},e),{},{page:n})}if("dec"===t.payload){var a=e.page-1;return a<=1&&(a=1),Object(u.a)(Object(u.a)({},e),{},{page:a})}}},y=n(9),v=n.n(y),m=n(11),x=n(13),S=n(1),q="4f30b443-f361-4a5a-9c4e-a09d421c9565",N=("https://content.guardianapis.com/search?api-key=".concat(q),"https://content.guardianapis.com/search?q=".concat("","&api-key=").concat(q),{isLoading:!0,hits:[],query:localStorage.getItem("query")?JSON.parse(localStorage.getItem("query")):"",page:1,nbPages:0}),P=Object(a.createContext)(),k=function(e){var t=e.children,n=Object(a.useReducer)(f,N),c=Object(x.a)(n,2),r=c[0],s=c[1];console.log("STATE",r);var i=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchStories",t),s({type:l}),e.prev=2,e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:a=e.sent,s(h({hits:a.response.results,nbPages:a.response.pages})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){localStorage.setItem("query",JSON.stringify(r.query)),r.query?i("https://content.guardianapis.com/search?page=".concat(r.page,"&q=").concat(r.query,"&api-key=").concat(q)):i("https://content.guardianapis.com/search?page=".concat(r.page,"&api-key=").concat(q))}),[r.query,r.page]),Object(S.jsx)(P.Provider,{value:Object(u.a)(Object(u.a)({},r),{},{removeStory:function(e){s(function(e){return{type:b,payload:{id:e}}}(e))},handleSearch:function(e){e!=r.query?s(g(e,1)):s(g(e,r.page))},handlePage:function(e){s(function(e){return{type:j,payload:e}}(e))}}),children:t})},E=function(){return Object(a.useContext)(P)},w=function(){var e=E(),t=e.query,n=e.handleSearch;return Object(S.jsxs)("form",{className:"search-form",onSubmit:function(e){return e.preventDefault()},children:[Object(S.jsx)("h2",{children:"search  news"}),Object(S.jsx)("input",{type:"text",className:"form-input",placeholder:"search news by Content",value:t,onChange:function(e){return n(e.target.value)}})]})},C=function(){var e=Object(a.useContext)(P),t=e.isLoading,n=e.hits,c=e.removeStory;return t?Object(S.jsx)("div",{className:"loading",children:" "}):Object(S.jsx)("section",{children:n.map((function(e){var t=e.webPublicationDate.slice(0,19),n=new Date(t),a=n.getDate();a=a<10?a="0".concat(a):a;var r=n.getMonth()+1;return r=r<10?r="0".concat(r):r,Object(S.jsxs)("article",{children:[Object(S.jsx)("h4",{className:"title",children:e.webTitle}),Object(S.jsxs)("div",{children:[" Section Name: ",e.sectionName," "]}),Object(S.jsxs)("div",{children:[" Publication Date: ","".concat(a,".").concat(r,".").concat(n.getFullYear())," "]}),Object(S.jsxs)("div",{children:[" Pillar Name: ",e.pillarName," "]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("a",{href:e.webUrl,className:"read-link",target:"_blank",children:" read more"}),Object(S.jsx)("button",{className:"remove-btn",onClick:c.bind(undefined,e.id),children:" remove "})]})]},e.id)}))})},L=function(){var e=E(),t=e.isLoading,n=e.page,a=e.nbPages,c=e.handlePage;return Object(S.jsxs)("div",{className:"btn-container",children:[Object(S.jsx)("button",{disabled:t,onClick:function(){return c("dec")},children:" \u041d\u0430\u0437\u0430\u0434 "}),Object(S.jsxs)("p",{children:[" ",n," of ",a," "]}),Object(S.jsx)("button",{disabled:t,onClick:c.bind(undefined,"inc"),children:" \u0414\u0430\u043b\u0435\u0435 "})]})},D=Object(i.b)(f);var T=function(){return Object(S.jsxs)(o.a,{store:D,children:[Object(S.jsx)(w,{})," ",Object(S.jsx)(L,{})," ",Object(S.jsx)(C,{}),"  "]})};s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(k,{children:Object(S.jsx)(T,{})})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b76a978f.chunk.js.map